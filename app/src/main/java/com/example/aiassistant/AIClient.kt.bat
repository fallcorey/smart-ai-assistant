package com.example.aiassistant

import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import kotlinx.coroutines.delay
import okhttp3.OkHttpClient
import okhttp3.Request
import org.json.JSONObject
import org.jsoup.Jsoup
import java.util.concurrent.TimeUnit

class AIClient {
    
    private val client = OkHttpClient.Builder()
        .connectTimeout(30L, TimeUnit.SECONDS)
        .readTimeout(30L, TimeUnit.SECONDS)
        .writeTimeout(30L, TimeUnit.SECONDS)
        .build()
    
    suspend fun getAIResponse(userMessage: String, context: String = ""): String = withContext(Dispatchers.IO) {
        try {
            // ะััะฐะตะผัั ะฟะพะปััะธัั ะพัะฒะตั ะพั ะปะพะบะฐะปัะฝะพะน ะผะพะดะตะปะธ ะธะปะธ API
            return@withContext processAdvancedAIResponse(userMessage, context)
        } catch (e: Exception) {
            return@withContext "โ๏ธ ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ. ะะพะถะฐะปัะนััะฐ, ะฟัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะธะฝัะตัะฝะตัั ะธ ะฟะพะฟัะพะฑัะนัะต ัะฝะพะฒะฐ."
        }
    }
    
    private suspend fun processAdvancedAIResponse(userMessage: String, context: String): String {
        val message = userMessage.lowercase()
        
        // ะะฑัะฐะฑะพัะบะฐ ัะฐะทะปะธัะฝัั ัะธะฟะพะฒ ะทะฐะฟัะพัะพะฒ
        return when {
            // ๐ ะะะะกะ ะ ะะะคะะะะะฆะะฏ
            message.contains("ะฝะฐะนะดะธ") || message.contains("ะฟะพะธัะบ") || message.contains("ะณัะณะป") -> {
                val query = extractSearchQuery(userMessage)
                if (query.isNotEmpty()) {
                    return performWebSearch(query)
                }
                "๐ ะงัะพ ะธะผะตะฝะฝะพ ะฒั ัะพัะธัะต ะฝะฐะนัะธ? ะฃัะพัะฝะธัะต ะฒะฐั ะทะฐะฟัะพั."
            }
            
            // ๐ ะะะะฌะะฃะะฏะขะะ ะ ะะะขะะะะขะะะ
            message.contains("ะฟะพััะธัะฐะน") || message.contains("ัะบะพะปัะบะพ ะฑัะดะตั") || 
            message.contains("+") || message.contains("-") || message.contains("*") || message.contains("/") -> {
                calculateMathExpression(userMessage)
            }
            
            // ๐ ะะะะะฏ ะ ะะะขะ
            message.contains("ะฒัะตะผั") || message.contains("ะบะพัะพััะน ัะฐั") -> getCurrentTime()
            message.contains("ะดะฐัะฐ") || message.contains("ะบะฐะบะพะต ัะธัะปะพ") -> getCurrentDate()
            message.contains("ะดะตะฝั ะฝะตะดะตะปะธ") -> getCurrentDayOfWeek()
            
            // ๐ค๏ธ ะะะะะะ
            message.contains("ะฟะพะณะพะดะฐ") -> "๐ค๏ธ ะะฝัะพัะผะฐัะธั ะพ ะฟะพะณะพะดะต ะฒัะตะผะตะฝะฝะพ ะฝะตะดะพัััะฟะฝะฐ. ะะตะบะพะผะตะฝะดัั ะธัะฟะพะปัะทะพะฒะฐัั ะฟัะธะปะพะถะตะฝะธะต 'ะะพะณะพะดะฐ' ะฝะฐ ะฒะฐัะตะผ ััััะพะนััะฒะต."
            
            // ๐ ะะะะะะะะะะะฏ ะ ะะะะะงะ
            message.contains("ะฝะฐะฟะพะผะฝะธ") || message.contains("ะฝะฐะฟะพะผะธะฝะฐะฝะธะต") -> "โฐ ะคัะฝะบัะธั ะฝะฐะฟะพะผะธะฝะฐะฝะธะน ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝะฐ ะฒ ัะปะตะดัััะตะผ ะพะฑะฝะพะฒะปะตะฝะธะธ."
            message.contains("ะทะฐะดะฐัะฐ") || message.contains("todo") -> "๐ ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐะดะฐัะฐะผะธ ะฟะพัะฒะธััั ะฒ ะฑัะดััะธั ะฒะตััะธัั."
            
            // ๐ต ะะฃะะซะะ ะ ะะะะะะะงะะะะฏ
            message.contains("ะผัะทัะบะฐ") || message.contains("ะฟะตัะฝั") -> "๐ต ะัะทัะบะฐะปัะฝัะต ััะฝะบัะธะธ ะฑัะดัั ะดะพะฑะฐะฒะปะตะฝั ัะบะพัะพ!"
            message.contains("ัััะบะฐ") || message.contains("ะฐะฝะตะบะดะพั") -> tellJoke()
            message.contains("ัะฐะบั") -> tellInterestingFact()
            
            // ๐ ะะะะขะะะขะซ ะ ะกะะะะฉะะะะฏ
            message.contains("ะฟะพะทะฒะพะฝะธ") || message.contains("ะทะฒะพะฝะพะบ") -> "๐ ะคัะฝะบัะธั ะทะฒะพะฝะบะพะฒ ะฒ ัะฐะทัะฐะฑะพัะบะต"
            message.contains("ัะผั") || message.contains("ัะพะพะฑัะตะฝะธะต") -> "๐ฌ SMS ััะฝะบัะธะธ ะฟะพัะฒัััั ะฒ ะพะฑะฝะพะฒะปะตะฝะธะธ"
            
            // ๐ ะะะะะะะฆะะฏ ะ ะะะกะขะะะะะะะะะะ
            message.contains("ะณะดะต ั") || message.contains("ะผะตััะพะฟะพะปะพะถะตะฝะธะต") -> "๐ ะะฟัะตะดะตะปะตะฝะธะต ะผะตััะพะฟะพะปะพะถะตะฝะธั ะฒัะตะผะตะฝะฝะพ ะฝะตะดะพัััะฟะฝะพ"
            message.contains("ะผะฐััััั") || message.contains("ะบะฐะบ ะดะพะตัะฐัั") -> "๐บ๏ธ ะะฐะฒะธะณะฐัะธั ะฑัะดะตั ะดะพัััะฟะฝะฐ ะฒ ัะปะตะดัััะธั ะฒะตััะธัั"
            
            // โ๏ธ ะกะะกะขะะะะซะ ะะะะะะะซ
            message.contains("ะฑัะดะธะปัะฝะธะบ") -> "โฐ ะัะดะธะปัะฝะธะบ ะผะพะถะฝะพ ัััะฐะฝะพะฒะธัั ัะตัะตะท ะฟัะธะปะพะถะตะฝะธะต ะงะฐัั"
            message.contains("ัะฐะนะผะตั") -> "โฑ๏ธ ะขะฐะนะผะตั ะฟะพัะฒะธััั ะฒ ะฑัะดััะธั ะพะฑะฝะพะฒะปะตะฝะธัั"
            message.contains("ััะบะพััั") -> "โ๏ธ ะะฐัััะพะนะบะฐ ััะบะพััะธ ะฒ ัะฐะทัะฐะฑะพัะบะต"
            message.contains("ะทะฒะพะฝะพะบ") -> "๐ ะฃะฟัะฐะฒะปะตะฝะธะต ะณัะพะผะบะพัััั ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝะพ"
            
            // ๐ ะะะฃะงะะะะ ะ ะะะะะะฏ
            message.contains("ะพะฑัััะฝะธ") || message.contains("ััะพ ัะฐะบะพะต") -> "๐ ะะฑัััะฝะตะฝะธะต ะบะพะฝัะตะฟัะธะน ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝะพ"
            message.contains("ะฟะตัะตะฒะพะด") || message.contains("translate") -> "๐ ะะตัะตะฒะพะดัะธะบ ะฟะพัะฒะธััั ะฒ ัะปะตะดัััะตะน ะฒะตััะธะธ"
            message.contains("ัะธะฝะพะฝะธะผ") -> "๐ ะะพะธัะบ ัะธะฝะพะฝะธะผะพะฒ ะฑัะดะตั ะดะพัััะฟะตะฝ ัะบะพัะพ"
            
            // ๐ฎ ะะะะซ ะ ะะะะะะะงะะะะฏ
            message.contains("ะธะณัะฐ") || message.contains("ััะณัะฐะตะผ") -> "๐ฎ ะะณัะพะฒัะต ััะฝะบัะธะธ ะฟะพัะฒัััั ะฒ ะพะฑะฝะพะฒะปะตะฝะธะธ"
            message.contains("ะทะฐะณะฐะดะฐะน ัะธัะปะพ") -> "๐ฏ ะะณัะฐ 'ะฃะณะฐะดะฐะน ัะธัะปะพ' ัะบะพัะพ ะฑัะดะตั ะดะพัััะฟะฝะฐ"
            message.contains("ะฒะธะบัะพัะธะฝะฐ") -> "๐ง ะะธะบัะพัะธะฝั ะฟะพัะฒัััั ะฒ ะฑัะดััะธั ะฒะตััะธัั"
            
            // ๐ฐ ะคะะะะะกะซ ะ ะะะะะะะขะะฆะะฏ
            message.contains("ะบััั") || message.contains("ะดะพะปะปะฐั") || message.contains("ะตะฒัะพ") -> "๐ฑ ะัััั ะฒะฐะปัั ะฒัะตะผะตะฝะฝะพ ะฝะตะดะพัััะฟะฝั"
            message.contains("ะบะพะฝะฒะตัั") || message.contains("convert") -> "๐ต ะะพะฝะฒะตััะตั ะฒะฐะปัั ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝ"
            
            // ๐ฅ ะะะะะะะฌะ ะ ะกะะะะข
            message.contains("ะบะฐะปะพัะธะธ") || message.contains("ะดะธะตัะฐ") -> "๐ ะะฐััะตั ะบะฐะปะพัะธะน ะฟะพัะฒะธััั ะฒ ะพะฑะฝะพะฒะปะตะฝะธะธ"
            message.contains("ะฟัะปัั") || message.contains("ะดะฐะฒะปะตะฝะธะต") -> "โค๏ธ ะะพะฝะธัะพัะธะฝะณ ะทะดะพัะพะฒัั ะฑัะดะตั ะดะพัััะฟะตะฝ"
            message.contains("ััะตะฝะธัะพะฒะบะฐ") -> "๐โโ๏ธ ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ััะตะฝะธัะพะฒะบะฐะผ ัะบะพัะพ ะฟะพัะฒัััั"
            
            // ๐ณ ะะฃะะะะะะะฏ
            message.contains("ัะตัะตะฟั") || message.contains("ะฟัะธะณะพัะพะฒะธัั") -> "๐ณ ะะพะธัะบ ัะตัะตะฟัะพะฒ ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝ"
            message.contains("ะบะฐะปะพัะธะนะฝะพััั") -> "๐ ะะฐััะตั ะบะฐะปะพัะธะนะฝะพััะธ ะฟัะพะดัะบัะพะฒ ะฟะพัะฒะธััั"
            
            // ๐ ะงะขะะะะ ะ ะะะะะ
            message.contains("ะบะฝะธะณะฐ") || message.contains("ะฟะพัะธัะฐัั") -> "๐ ะะตะบะพะผะตะฝะดะฐัะธะธ ะบะฝะธะณ ะฒ ัะฐะทัะฐะฑะพัะบะต"
            message.contains("ัะธัะฐัะฐ") -> "๐ซ ะฆะธัะฐัั ะฒะตะปะธะบะธั ะปัะดะตะน ัะบะพัะพ ะฟะพัะฒัััั"
            
            // ๐จ ะขะะะะงะะกะขะะ
            message.contains("ะฝะฐัะธััะน") || message.contains("ัะธััะฝะพะบ") -> "๐จ ะะตะฝะตัะฐัะธั ะธะทะพะฑัะฐะถะตะฝะธะน ะฟะพัะฒะธััั ะฒ ะพะฑะฝะพะฒะปะตะฝะธะธ"
            message.contains("ััะธั") || message.contains("ะฟะพัะทะธั") -> "โ๏ธ ะะตะฝะตัะฐัะธั ััะธัะพะฒ ะฑัะดะตั ะดะพัััะฟะฝะฐ"
            message.contains("ะธััะพัะธั") -> "๐ ะกะพะทะดะฐะฝะธะต ะธััะพัะธะน ะฟะพัะฒะธััั ะฒ ะฑัะดััะตะผ"
            
            // ๐ผ ะะะะะขะ ะ ะะะะะฃะะขะะะะะกะขะฌ
            message.contains("ะฒัััะตัะฐ") || message.contains("ะบะฐะปะตะฝะดะฐัั") -> "๐ ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐะปะตะฝะดะฐัะตะผ ะฑัะดะตั ะดะพัััะฟะฝะพ"
            message.contains("ะพััะตั") || message.contains("ะดะพะบัะผะตะฝั") -> "๐ ะะฐะฑะพัะฐ ั ะดะพะบัะผะตะฝัะฐะผะธ ะฒ ัะฐะทัะฐะฑะพัะบะต"
            
            // ๐ ะะะะฃะะะ
            message.contains("ะบัะฟะธัั") || message.contains("ะฟะพะบัะฟะบ") -> "๐ ะะพะผะพัั ั ะฟะพะบัะฟะบะฐะผะธ ัะบะพัะพ ะฟะพัะฒะธััั"
            message.contains("ัะตะฝะฐ") || message.contains("ััะพะธะผะพััั") -> "๐ฐ ะัะพะฒะตัะบะฐ ัะตะฝ ะฑัะดะตั ะดะพัััะฟะฝะฐ"
            
            // ๐ ะขะะะะกะะะะข
            message.contains("ัะฐะบัะธ") -> "๐ ะัะทะพะฒ ัะฐะบัะธ ะฒัะตะผะตะฝะฝะพ ะฝะตะดะพัััะฟะตะฝ"
            message.contains("ัะฐัะฟะธัะฐะฝะธะต") || message.contains("ะฐะฒัะพะฑัั") -> "๐ ะะฐัะฟะธัะฐะฝะธะต ััะฐะฝัะฟะพััะฐ ะฟะพัะฒะธััั"
            
            // ๐ฌ ะะะฉะะะะ
            else -> generateSmartResponse(userMessage, context)
        }
    }
    
    private fun extractSearchQuery(message: String): String {
        val patterns = listOf(
            "ะฝะฐะนะดะธ (.+)" to 1,
            "ะฟะพะธัะบ (.+)" to 1,
            "ะณัะณะป (.+)" to 1,
            "ะฝะฐะนัะธ (.+)" to 1
        )
        
        for ((pattern, group) in patterns) {
            val regex = pattern.toRegex()
            val match = regex.find(message.lowercase())
            if (match != null) {
                return match.groupValues[group].trim()
            }
        }
        return message
    }
    
    private suspend fun performWebSearch(query: String): String {
        return try {
            val searchUrl = "https://www.google.com/search?q=${query.replace(" ", "+")}"
            val doc = Jsoup.connect(searchUrl)
                .userAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36")
                .get()
            
            val results = doc.select("h3").take(3).map { it.text() }
            
            if (results.isNotEmpty()) {
                "๐ **ะะตะทัะปััะฐัั ะฟะพะธัะบะฐ ะฟะพ ะทะฐะฟัะพัั \"$query\":**\n\n" +
                results.joinToString("\n\n") { "โข $it" } +
                "\n\nะะปั ะฟะพะดัะพะฑะฝะพะน ะธะฝัะพัะผะฐัะธะธ ะพัะบัะพะนัะต ะฑัะฐัะทะตั."
            } else {
                "โ ะะพ ะทะฐะฟัะพัั \"$query\" ะฝะธัะตะณะพ ะฝะต ะฝะฐะนะดะตะฝะพ. ะะพะฟัะพะฑัะนัะต ะธะทะผะตะฝะธัั ัะพัะผัะปะธัะพะฒะบั."
            }
        } catch (e: Exception) {
            "โ๏ธ ะะต ัะดะฐะปะพัั ะฒัะฟะพะปะฝะธัั ะฟะพะธัะบ. ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะธะฝัะตัะฝะตัั."
        }
    }
    
    private fun calculateMathExpression(expression: String): String {
        return try {
            val cleanExpr = expression
                .replace("ะฟะพััะธัะฐะน", "")
                .replace("ัะบะพะปัะบะพ ะฑัะดะตั", "")
                .replace(" ", "")
                .replace(",", ".")
            
            // ะัะพััะฐั ะผะฐัะตะผะฐัะธะบะฐ
            when {
                cleanExpr.contains("+") -> {
                    val parts = cleanExpr.split("+")
                    val result = parts.sumOf { it.toDouble() }
                    "โ ะะตะทัะปััะฐั: $result"
                }
                cleanExpr.contains("-") -> {
                    val parts = cleanExpr.split("-")
                    val result = parts[0].toDouble() - parts[1].toDouble()
                    "โ ะะตะทัะปััะฐั: $result"
                }
                cleanExpr.contains("*") -> {
                    val parts = cleanExpr.split("*")
                    val result = parts[0].toDouble() * parts[1].toDouble()
                    "โ ะะตะทัะปััะฐั: $result"
                }
                cleanExpr.contains("/") -> {
                    val parts = cleanExpr.split("/")
                    if (parts[1].toDouble() == 0.0) "โ ะะตะปะตะฝะธะต ะฝะฐ ะฝะพะปั ะฝะตะฒะพะทะผะพะถะฝะพ"
                    else {
                        val result = parts[0].toDouble() / parts[1].toDouble()
                        "โ ะะตะทัะปััะฐั: $result"
                    }
                }
                else -> "โ ะะต ะผะพะณั ัะฐัะฟะพะทะฝะฐัั ะผะฐัะตะผะฐัะธัะตัะบะพะต ะฒััะฐะถะตะฝะธะต"
            }
        } catch (e: Exception) {
            "โ ะัะธะฑะบะฐ ะฒััะธัะปะตะฝะธั. ะัะพะฒะตัััะต ะฟัะฐะฒะธะปัะฝะพััั ะฒััะฐะถะตะฝะธั."
        }
    }
    
    private fun getCurrentTime(): String {
        val time = java.time.LocalTime.now()
            .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm:ss"))
        return "๐ ะกะตะนัะฐั $time"
    }
    
    private fun getCurrentDate(): String {
        val date = java.time.LocalDate.now()
            .format(java.time.format.DateTimeFormatter.ofPattern("dd.MM.yyyy"))
        return "๐ ะกะตะณะพะดะฝั $date"
    }
    
    private fun getCurrentDayOfWeek(): String {
        val days = listOf("ะะพะฝะตะดะตะปัะฝะธะบ", "ะัะพัะฝะธะบ", "ะกัะตะดะฐ", "ะงะตัะฒะตัะณ", "ะััะฝะธัะฐ", "ะกัะฑะฑะพัะฐ", "ะะพัะบัะตัะตะฝัะต")
        val dayOfWeek = java.time.LocalDate.now().dayOfWeek.value - 1
        return "๐ ะกะตะณะพะดะฝั ${days[dayOfWeek]}"
    }
    
    private fun tellJoke(): String {
        val jokes = listOf(
            "๐คฃ ะะพัะตะผั ะฟัะพะณัะฐะผะผะธััั ะฟััะฐัั ะฅัะปะปะพัะธะฝ ะธ ะะพะถะดะตััะฒะพ? ะะพัะพะผั ััะพ Oct 31 == Dec 25!",
            "๐ ะงัะพ ัะบะฐะทะฐะป ะพะดะธะฝ ะฑะฐะนั ะดััะณะพะผั? ะฏ ัะตะฑั ะฝะต ะฑะธั, ั ั ัะพะฑะพะน!",
            "๐ ะะพัะตะผั Java-ัะฐะทัะฐะฑะพััะธะบะธ ะฝะพััั ะพัะบะธ? ะะพัะพะผั ััะพ ะพะฝะธ ะฝะต C#!",
            "๐ ะงัะพ ะณะพะฒะพัะธั null, ะฒัััะตัะธะฒ ัะฒะพะตะณะพ ะดััะณะฐ? Null-ะทะดะฐะฒััะฒัะน!",
            "๐คญ ะะพัะตะผั Python ััะฐะป ัะฐะบะธะผ ะฟะพะฟัะปััะฝัะผ? ะะพัะพะผั ััะพ ั ะฝะตะณะพ ะตััั ะทะผะตะธะฝะพะต ะพะฑะฐัะฝะธะต!"
        )
        return jokes.random()
    }
    
    private fun tellInterestingFact(): String {
        val facts = listOf(
            "๐ง ะงะตะปะพะฒะตัะตัะบะธะน ะผะพะทะณ ะผะพะถะตั ััะฐะฝะธัั ะดะพ 2.5 ะฟะตัะฐะฑะฐะนั ะธะฝัะพัะผะฐัะธะธ!",
            "๐ ะะตะผะปั - ะตะดะธะฝััะฒะตะฝะฝะฐั ะฟะปะฐะฝะตัะฐ ะฒ ะกะพะปะฝะตัะฝะพะน ัะธััะตะผะต, ะณะดะต ะฝะฐะฑะปัะดะฐะตััั ัะตะบัะพะฝะธะบะฐ ะฟะปะธั.",
            "๐ ะััะฐะฒัะธ ะฝะธะบะพะณะดะฐ ะฝะต ัะฟัั!",
            "๐ฑ ะะตัะฒัะน ะผะพะฑะธะปัะฝัะน ัะตะปะตัะพะฝ ััะพะธะป 4000 ะดะพะปะปะฐัะพะฒ ะธ ะฒะตัะธะป ะฟะพััะธ 1 ะบะณ!",
            "๐ก ะะฐะผะฟะพัะบะฐ ะณะพัะธั ัะพะปัะบะพ ะฟะพัะพะผั, ััะพ ัะปะตะบััะพะฝั ะฟะพััะพัะฝะฝะพ ััะฐะปะบะธะฒะฐัััั ะดััะณ ั ะดััะณะพะผ."
        )
        return "๐ ะะฝัะตัะตัะฝัะน ัะฐะบั: ${facts.random()}"
    }
    
    private fun generateSmartResponse(message: String, context: String): String {
        val responses = listOf(
            "๐ค ะะฝัะตัะตัะฝัะน ะฒะพะฟัะพั! ะะฐะฒะฐะนัะต ะฟะพะดัะผะฐะตะผ ะฒะผะตััะต...",
            "๐ญ ะะฝะต ะฝัะถะฝะพ ะฝะตะผะฝะพะณะพ ะฒัะตะผะตะฝะธ, ััะพะฑั ะพะฑัะฐะฑะพัะฐัั ะฒะฐั ะทะฐะฟัะพั.",
            "๐ฏ ะะพัะพะถะต, ะฒั ัะพัะธัะต ัะทะฝะฐัั ััะพ-ัะพ ะฒะฐะถะฝะพะต!",
            "๐ ะัะปะธัะฝัะน ะฒะพะฟัะพั! ะะฐะฒะฐะนัะต ัะฐะทะฑะตัะตะผัั...",
            "๐ก ะฃ ะผะตะฝั ะตััั ะฝะตัะบะพะปัะบะพ ะผััะปะตะน ะฟะพ ััะพะผั ะฟะพะฒะพะดั...",
            "๐ ะะฐะฒะฐะนัะต ะธััะปะตะดัะตะผ ััั ัะตะผั ะฒะผะตััะต!",
            "๐ ะัะตะบัะฐัะฝัะน ะฒะพะฟัะพั! ะญัะพ ะดะตะนััะฒะธัะตะปัะฝะพ ะธะฝัะตัะตัะฝะฐั ัะตะผะฐ.",
            "๐ ะะพะทะฒะพะปััะต ะผะฝะต ะฟะพะดะตะปะธัััั ั ะฒะฐะผะธ ะธะฝัะพัะผะฐัะธะตะน ะฟะพ ััะพะผั ะฒะพะฟัะพัั...",
            "๐ ะญัะพ ััะตะฑัะตั ะฝะตะบะพัะพัะพะณะพ ะฐะฝะฐะปะธะทะฐ...",
            "๐ผ ะฏ ะณะพัะพะฒ ะฟะพะผะพัั ะฒะฐะผ ั ััะธะผ ะฒะพะฟัะพัะพะผ!"
        )
        
        val baseResponse = responses.random()
        
        return when {
            message.contains("?") -> "$baseResponse\n\nะะฐั ะฒะพะฟัะพั: \"$message\"\n\n" +
                "ะ ัะพะถะฐะปะตะฝะธั, ะผะพะธ ะทะฝะฐะฝะธั ะพะณัะฐะฝะธัะตะฝั. ะะปั ัะปะพะถะฝัั ะฒะพะฟัะพัะพะฒ ัะตะบะพะผะตะฝะดัั:\n" +
                "โข ะัะฟะพะปัะทะพะฒะฐัั ะฟะพะธัะบ ะฒ ะธะฝัะตัะฝะตัะต\n" +
                "โข ะะฑัะฐัะธัััั ะบ ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะผ ะธััะพัะฝะธะบะฐะผ\n" +
                "โข ะะฐัััะพะธัั ะฟะพะดะบะปััะตะฝะธะต ะบ ะฟัะพะดะฒะธะฝััะพะน AI ะผะพะดะตะปะธ"
            
            message.length > 50 -> "$baseResponse\n\nะฏ ะฒะฝะธะผะฐัะตะปัะฝะพ ะธะทััะธะป ะฒะฐัะต ัะพะพะฑัะตะฝะธะต ะธ ะณะพัะพะฒ ะฟะพะผะพัั!"
            
            else -> "$baseResponse\n\nะั ัะบะฐะทะฐะปะธ: \"$message\"\n\n" +
                "ะงะตะผ ะตัะต ั ะผะพะณั ะฟะพะผะพัั? ะฏ ัะผะตั:\n" +
                "โข ๐ ะัะบะฐัั ะธะฝัะพัะผะฐัะธั\n" +
                "โข ๐ ะัะฟะพะปะฝััั ัะฐััะตัั\n" +
                "โข ๐ ะกะพะพะฑัะฐัั ะฒัะตะผั ะธ ะดะฐัั\n" +
                "โข ๐ฏ ะัะฒะตัะฐัั ะฝะฐ ะฒะพะฟัะพัั\n" +
                "โข ๐ ะกะพะทะดะฐะฒะฐัั ะฝะฐะฟะพะผะธะฝะฐะฝะธั\n" +
                "โข ๐ต ะฃะฟัะฐะฒะปััั ะผะตะดะธะฐ\n" +
                "โข ๐ ะะฐะฑะพัะฐัั ั ะผะตััะพะฟะพะปะพะถะตะฝะธะตะผ\n" +
                "โข ๐ฐ ะะพะฝะฒะตััะธัะพะฒะฐัั ะฒะฐะปััั\n" +
                "โข ๐ฅ ะะพะผะพะณะฐัั ัะพ ะทะดะพัะพะฒัะตะผ\n" +
                "โข ๐ณ ะัะบะฐัั ัะตัะตะฟัั\n" +
                "โข ๐ ะะตะบะพะผะตะฝะดะพะฒะฐัั ะบะฝะธะณะธ\n" +
                "โข ๐จ ะกะพะทะดะฐะฒะฐัั ะบะพะฝัะตะฝั\n" +
                "โข ๐ผ ะะพะผะพะณะฐัั ั ัะฐะฑะพัะพะน\n" +
                "โข ๐ ะััะธััะธัะพะฒะฐัั ั ะฟะพะบัะฟะบะฐะผะธ\n" +
                "โข ๐ ะะพะผะพะณะฐัั ั ััะฐะฝัะฟะพััะพะผ"
        }
    }
}
